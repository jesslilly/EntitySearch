!function(t,e){function r(r){console.log("hideSearchPopup on "+this.id);var a=this;e.setTimeout(function(){var e=a.getAttribute("data-entity-search-group");if(t.activeElement.getAttribute("data-entity-search-group")!==e){var r=t.querySelector("[data-entity-search-popup-id='"+e+"']");r.parentElement.removeChild(r)}},200)}function a(e){var a=t.createElement("div"),i=e.getAttribute("data-entity-search-box-id");a.className="list-group",a.setAttribute("data-entity-search-popup-id",i),a.style.position="absolute",a.style.zIndex=999,a.style.backgroundColor="#FFFFFF",a.style["box-shadow"]="0px 4px 4px lightgray";var n=l(8);return n.forEach(function(e,n){var o=t.createElement("a");o.href=e.href,o.className="list-group-item",o.setAttribute("data-entity-search-group",i),o.addEventListener("blur",r);var s=t.createTextNode(e.title);o.appendChild(s),a.appendChild(o)}),a}function i(){console.log("showSearchPopup on "+this.id);var e=this.getAttribute("data-entity-search-group"),r=t.querySelector("[data-entity-search-popup-id='"+e+"']");if(!r){var i=a(this);this.parentElement.appendChild(i)}}function n(){var e=t.querySelector("script[data-entity-search-route-data]");if(e){var r=JSON.parse(e.textContent);r&&(r.href=t.location.href,r.lastVisted=new Date,r.title||(r.title=t.title,o(r)))}}function o(t){var e="entity-search-",r=JSON.parse(localStorage.getItem(e));Array.isArray(r)||(r=[]),r.unshift(t),r.length>100&&r.pop(),localStorage.setItem(e,JSON.stringify(r))}function s(){var t="entity-search-";return JSON.parse(localStorage.getItem(t))}function l(e){var r=s();if(!r)return[];var a=[];r.length<e&&(e=r.length);for(var i=0;i<r.length&&a.length<e;i++){var n=r[i];if(n.href!==t.location.href){for(var o=!1,l=0;l<a.length;l++){var c=a[l];if(c.href===n.href){o=!0;break}}o||a.push(n)}}return a}function c(){n();for(var e=t.querySelectorAll("[data-entity-search]"),a=0;a<e.length;a++){var o=e[a];o.addEventListener("focus",i),o.addEventListener("blur",r),o.setAttribute("data-entity-search-box-id",a),o.setAttribute("data-entity-search-group",a)}}console.log("entity-search loaded."),c()}(document,window),define("entity-search",function(){});